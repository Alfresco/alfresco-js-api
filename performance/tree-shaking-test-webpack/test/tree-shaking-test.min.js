!function(n){function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var i={};r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=33)}([function(t,e,n){"use strict";function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}n.d(e,"a",function(){return r});var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}},function(t,e,n){"use strict";var i,r,o,s,a,u,c,h=n(32),f=n(18),p=Function.prototype.apply,l=Function.prototype.call,d=Object.create,g=Object.defineProperty,m=Object.defineProperties,y=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};r=function(t,e){var n,r;return f(e),i.call(r=this,t,n=function(){o.call(r,t,n),p.call(e,this,arguments)}),n.__eeOnceListener__=e,this},a={on:i=function(t,e){var n;return f(e),y.call(this,"__ee__")?n=this.__ee__:(n=v.value=d(null),g(this,"__ee__",v),v.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},once:r,off:o=function(t,e){var n,r,i,o;if(f(e),!y.call(this,"__ee__"))return this;if(!(n=this.__ee__)[t])return this;if("object"==typeof(r=n[t]))for(o=0;i=r[o];++o)i!==e&&i.__eeOnceListener__!==e||(2===r.length?n[t]=r[o?0:1]:r.splice(o,1));else r!==e&&r.__eeOnceListener__!==e||delete n[t];return this},emit:s=function(t,e,n){var r,i,o,s,a;if(y.call(this,"__ee__")&&(s=this.__ee__[t]))if("object"==typeof s){for(a=Array((i=arguments.length)-1),r=1;r<i;++r)a[r-1]=arguments[r];for(s=s.slice(),r=0;o=s[r];++r)p.call(o,this,a)}else switch(arguments.length){case 1:l.call(s,this);break;case 2:l.call(s,this,e);break;case 3:l.call(s,this,e,n);break;default:for(a=Array((i=arguments.length)-1),r=1;r<i;++r)a[r-1]=arguments[r];p.call(s,this,a)}}},u={on:h(i),once:h(r),off:h(o),emit:h(s)},c=m({},u),t.exports=e=function(t){return null==t?d(c):m(Object(t),u)},e.methods=a},function(t,s,a){"use strict";!function(e){a.d(s,"a",function(){return o});var t=a(1),n=a(9),r=a(8),y=t,v=r,i={},o=function(){function t(t){this.basePath="",this.authentications={basicAuth:{type:"basic"}},this.defaultHeaders={},this.timeout=void 0,this.on=y.on,this.off=y.off,this.once=y.once,this.emit=y.emit,this.storage=new n.a,this.host=t,this.on=(new y).on,this.off=(new y).off,this.once=(new y).once,this.emit=(new y).emit,y.call(this)}return t.prototype.paramToString=function(t){return null==t?"":t instanceof Date?t.toJSON():""+t},t.prototype.buildUrl=function(t,r){t.match(/^\//)||(t="/"+t);var e=this.basePath+t,i=this;return e=e.replace(/\{([\w-]+)\}/g,function(t,e){var n;return n=r.hasOwnProperty(e)?i.paramToString(r[e]):t,encodeURIComponent(n)})},t.prototype.isJsonMime=function(t){return!(null===t||!t.match(/^application\/json(;.*)?$/i))},t.prototype.jsonPreferredMime=function(t){for(var e=0;e<t.length;e++)if(this.isJsonMime(t[e]))return t[e];return t[0]},t.prototype.isFileParam=function(t){return"function"==typeof e&&t instanceof e||("function"==typeof Blob&&t instanceof Blob||("function"==typeof File&&t instanceof File||"object"==typeof File&&t instanceof File))},t.prototype.normalizeParams=function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)&&null!=t[n]){var r=t[n];e[n]=this.isFileParam(r)||Array.isArray(r)?r:this.paramToString(r)}return e},t.prototype.buildCollectionParam=function(t,e){if(!t)return null;switch(e){case"csv":return t.map(this.paramToString).join(",");case"ssv":return t.map(this.paramToString).join(" ");case"tsv":return t.map(this.paramToString).join("\t");case"pipes":return t.map(this.paramToString).join("|");case"multi":return t.map(this.paramToString);default:throw Error("Unknown collection format: "+e)}},t.prototype.isWithCredentials=function(){return!!this.config&&this.config.withCredentials},t.prototype.applyAuthToRequest=function(t){var e=this.authentications.basicAuth;switch(e.type){case"basic":(e.username||e.password)&&t.auth(e.username?encodeURI(e.username):"",e.password?encodeURI(e.password):"");break;case"activiti":e.ticket&&t.set({Authorization:e.ticket});break;case"oauth2":e.accessToken&&t.set({Authorization:"Bearer "+e.accessToken});break;default:throw Error("Unknown authentication type: "+e.type)}},t.prototype.deserialize=function(t,e){if(null===t||null===e)return null;var n=t.body;return null===n&&(n=t.text),this.convertToType(n,e)},t.prototype.parseDate=function(t){var e=10+t.substring(10).search(/[\+\-]/),n=10<e?t.substring(0,e):t,r=10<e?t.substring(e):"",i=this.parseDateTime(n),o=this.parseDateTimeZone(r);return i.setTime(i.getTime()+6e4*o),i},t.prototype.parseDateTime=function(t){t.split("+");var e=t.split(/[^0-9]/).map(function(t){return parseInt(t,10)});return new Date(Date.UTC(e[0],e[1]-1||0,e[2]||1,e[3]||0,e[4]||0,e[5]||0,e[6]||0))},t.prototype.parseDateTimeZone=function(t){var e=/([\+\-])(\d{2}):?(\d{2})?/.exec(t);return null!==e?-1*parseInt(e[1]+"1")*(60*parseInt(e[2]))+parseInt(e[3]||"0"):0},t.prototype.convertToType=function(t,e){var n=this;switch(e){case"Binary":return t;case"Boolean":return!!t;case"Integer":return parseInt(t,10);case"Number":return parseFloat(t);case"String":return null!=t?t+"":t;case"Date":return t?this.parseDate(t+""):null;default:if(e===Object)return t;if("function"==typeof e)return e.constructFromObject(t);if(Array.isArray(e)){var r=e[0];return t?t.map(function(t){return n.convertToType(t,r)}):null}if("object"!=typeof e)return t;var i=void 0,o=void 0;for(var s in e)if(e.hasOwnProperty(s)){o=e[i=s];break}var a={};for(var s in t)if(t.hasOwnProperty(s)){var u=this.convertToType(s,i),c=t[s],h="object"==typeof c?c:this.convertToType(c,o);a[u]=h}return a}},t.prototype.callApi=function(t,e,n,r,i,o,s,a,u,c,h,f){var p;h?p=this.buildUrlCustomBasePath(this.host+"/"+h,t,n):p=this.buildUrl(t,n);return this.callHostApi(t,e,n,r,i,o,s,a,u,c,h,f,p)},t.prototype.callCustomApi=function(t,e,n,r,i,o,s,a,u,c,h,f){var p=this.buildUrlCustomBasePath(t,"",n);return this.callHostApi(t,e,n,r,i,o,s,a,u,c,h,f,p)},t.prototype.callHostApi=function(t,e,n,r,i,o,s,a,u,c,h,f,p){var l=this,d={};y(d);var g=this.buildRequest(e,p,r,i,o,s,a,u,f,d,c);"Binary"===c&&(g=g.buffer(!0).parse(v.parse["application/octet-stream"]));var m=new Promise(function(r,i){g.end(function(t,e){if(t)l.emit("error",t),d.emit("error",t),401===t.status&&(l.emit("unauthorized"),d.emit("unauthorized")),i(e&&e.text?Object.assign(t=t||{},{message:e.text}):{error:t});else{l.isBpmRequest()&&e.header&&e.header.hasOwnProperty("set-cookie")&&(l.authentications.cookie=e.header["set-cookie"]);var n={};n=l.deserialize(e,"text/html"===e.type?"String":c),d.emit("success",n),r(n)}}).on("abort",function(){d.emit("abort")})});return m.on=function(){return d.on.apply(d,arguments),this},m.once=function(){return d.once.apply(d,arguments),this},m.emit=function(){return d.emit.apply(d,arguments),this},m.off=function(){return d.off.apply(d,arguments),this},m.abort=function(){return g.abort(),this},m},t.prototype.isBpmRequest=function(){return"BpmAuth"===this.className||"BpmClient"===this.className},t.prototype.isCsrfEnabled=function(){return!this.config||!this.config.disableCsrf},t.prototype.setCsrfToken=function(t){var e=this.createCSRFToken();t.set("X-CSRF-TOKEN",e),this.isNodeEnv()&&t.set("Cookie","CSRF-TOKEN="+e+";path=/");try{document.cookie="CSRF-TOKEN="+e+";path=/"}catch(t){}},t.prototype.isNodeEnv=function(){return i.release&&"node"===i.release.name},t.prototype.createCSRFToken=function(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e16]+"10000000000000000").replace(/[01]/g,this.createCSRFToken)},t.prototype.progress=function(t,e){t.lengthComputable&&e.emit("progress",{total:t.total,loaded:t.loaded,percent:Math.round(t.loaded/t.total*100)})},t.prototype.buildUrlCustomBasePath=function(t,e,r){e.match(/^\//)||(e="/"+e);var n=t+e,i=this;return n=n.replace(/\{([\w-]+)\}/g,function(t,e){var n;return n=r.hasOwnProperty(e)?i.paramToString(r[e]):t,encodeURIComponent(n)})},t.prototype.buildRequest=function(t,e,n,r,i,o,s,a,u,c,h){var f=this,p=v(t,e);this.applyAuthToRequest(p),p.query(this.normalizeParams(n)),p.set(this.defaultHeaders).set(this.normalizeParams(r)),this.isBpmRequest()&&this.isCsrfEnabled()&&this.setCsrfToken(p),this.isWithCredentials()&&p.withCredentials(),this.isBpmRequest()&&(p._withCredentials=!0,this.authentications.cookie&&this.isNodeEnv()&&p.set("Cookie",this.authentications.cookie)),p.timeout(this.timeout);var l=this.jsonPreferredMime(s);if(l&&"multipart/form-data"!==l?p.type(l):p.header["Content-Type"]||"multipart/form-data"===l||p.type("application/json"),"application/x-www-form-urlencoded"===l)p.send(this.normalizeParams(i)).on("progress",function(t){f.progress(t,c)});else if("multipart/form-data"===l){var d=this.normalizeParams(i);for(var g in d)d.hasOwnProperty(g)&&(this.isFileParam(d[g])?p.attach(g,d[g]).on("progress",function(t){f.progress(t,c)}):p.field(g,d[g]).on("progress",function(t){f.progress(t,c)}))}else o&&p.send(o).on("progress",function(t){f.progress(t,c)});var m=this.jsonPreferredMime(a);return m&&p.accept(m),"Blob"===h||"blob"===u||"Blob"===u?p.responseType("blob"):"String"===h&&p.responseType("string"),p},t}()}(a(3).Buffer)},function(t,M,e){"use strict";!function(t){function n(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=f.prototype:(null===t&&(t=new f(e)),t.length=e),t}function f(t,e,n){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,e,n);if("number"!=typeof t)return r(this,t,e,n);if("string"==typeof e)throw Error("If encoding is specified then the first argument must be a string");return i(this,t)}function r(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);f.TYPED_ARRAY_SUPPORT?(t=e).__proto__=f.prototype:t=o(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!f.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|c(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(f.isBuffer(e)){var n=0|s(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):o(t,e);if("Buffer"===e.type&&O(e.data))return o(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function i(t,e){if(u(e),t=a(t,e<0?0:0|s(e)),!f.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function o(t,e){var n=e.length<0?0:0|s(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function s(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function c(t,e){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return I(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return S(t).length;default:if(r)return I(t).length;e=(""+e).toLowerCase(),r=!0}}function h(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function p(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),isNaN(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n<t.length){if(n<0){if(!i)return-1;n=0}}else{if(i)return-1;n=t.length-1}if("string"==typeof e&&(e=f.from(e,r)),f.isBuffer(e))return 0===e.length?-1:l(t,e,n,r,i);if("number"==typeof e)return e&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):l(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function l(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var s,a=1,u=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=(r+"").toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;u/=a=2,c/=2,n/=2}if(i){var h=-1;for(s=n;s<u;s++)if(o(t,s)===o(e,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===c)return h*a}else-1!==h&&(s-=s-h),h=-1}else for(u<n+c&&(n=u-c),s=n;0<=s;s--){for(var f=!0,p=0;p<c;p++)if(o(t,s+p)!==o(e,p)){f=!1;break}if(f)return s}return-1}function g(t,e,n,r){var i=t.length-(n=+n||0);r?i<(r=+r)&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function m(t,e,n,r){return x(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function d(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],h=null,f=239<c?4:223<c?3:191<c?2:1;if(i+f<=n)switch(f){case 1:c<128&&(h=c);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&c)<<6|63&o)&&(h=u);break;case 3:s=t[i+2],128==(192&(o=t[i+1]))&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(h=u);break;case 4:s=t[i+2],a=t[i+3],128==(192&(o=t[i+1]))&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(h=u)}null===h?(h=65533,f=1):65535<h&&(r.push((h-=65536)>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=f}return function(t){var e=t.length;if(e<=j)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=j));return n}(r)}function y(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function v(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function w(t,e,n){var r=t.length;e&&0<=e||(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;++o)i+=R(t[o]);return i}function _(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function b(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,n,r,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(t.length<n+r)throw new RangeError("Index out of range")}function A(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function k(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function E(t,e,n,r){if(t.length<n+r)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function C(t,e,n,r,i){return i||E(t,0,n,4),B.write(t,e,n,r,23,4),n+4}function P(t,e,n,r,i){return i||E(t,0,n,8),B.write(t,e,n,r,52,8),n+8}function R(t){return t<16?"0"+t.toString(16):t.toString(16)}function I(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(1114112<=n)throw Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function S(t){return U.toByteArray(function(t){var e;if((t=(e=t,e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(L,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function x(t,e,n,r){for(var i=0;i<r&&(e.length>i+n&&t.length>i);++i)e[i+n]=t[i];return i}var U=e(17),B=e(16),O=e(15);M.Buffer=f,M.SlowBuffer=function(t){return+t!=t&&(t=0),f.alloc(+t)},M.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),M.kMaxLength=n(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,e,n){return r(null,t,e,n)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,e,n){return r=null,o=e,s=n,u(i=t),0<i&&void 0!==o?"string"==typeof s?a(r,i).fill(o,s):a(r,i).fill(o):a(r,i);var r,i,o,s},f.allocUnsafe=function(t){return i(null,t)},f.allocUnsafeSlow=function(t){return i(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,e){if(!f.isBuffer(t)||!f.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},f.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,e){if(!O(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var r=f.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!f.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},f.byteLength=c,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)h(this,e,e+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)h(this,e,e+3),h(this,e+1,e+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)h(this,e,e+7),h(this,e+1,e+6),h(this,e+2,e+5),h(this,e+3,e+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?d(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),this.length<e)return"";if((void 0===n||this.length<n)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return w(this,e,n);case"utf8":case"utf-8":return d(this,e,n);case"ascii":return y(this,e,n);case"latin1":case"binary":return v(this,e,n);case"base64":return i=this,s=n,U.fromByteArray(0===(o=e)&&s===i.length?i:i.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}var i,o,s}.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",e=M.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),e<this.length&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,e,n,r,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||t.length<n||r<0||this.length<i)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(r,i),c=t.slice(e,n),h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},f.prototype.includes=function(t,e,n){return-1!=this.indexOf(t,e,n)},f.prototype.indexOf=function(t,e,n){return p(this,t,e,n,!0)},f.prototype.lastIndexOf=function(t,e,n){return p(this,t,e,n,!1)},f.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||this.length<e)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o,s,a,u,c,h,f,p,l,d=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return l=n,x(I(t,(f=this).length-(p=e)),f,p,l);case"ascii":return m(this,t,e,n);case"latin1":case"binary":return m(this,t,e,n);case"base64":return u=this,c=e,h=n,x(S(t),u,c,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=n,x(function(t,e){for(var n,r,i=[],o=0;o<t.length&&0<=(e-=2);++o)n=t.charCodeAt(o),r=n>>8,i.push(n%256),i.push(r);return i}(t,(o=this).length-(s=e)),o,s,a);default:if(d)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;f.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),f.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=f.prototype;else{var i=e-t;n=new f(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},f.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||b(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},f.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||b(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},f.prototype.readUInt8=function(t,e){return e||b(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,e){return e||b(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,e){return e||b(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,e){return e||b(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,e){return e||b(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||b(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r<(i*=128)||(r-=Math.pow(2,8*e)),r},f.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||b(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return o<(i*=128)||(o-=Math.pow(2,8*e)),o},f.prototype.readInt8=function(t,e){return e||b(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,e){e||b(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt16BE=function(t,e){e||b(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt32LE=function(t,e){return e||b(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,e){return e||b(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,e){return e||b(t,4,this.length),B.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,e){return e||b(t,4,this.length),B.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,e){return e||b(t,8,this.length),B.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,e){return e||b(t,8,this.length),B.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||T(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},f.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||T(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},f.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},f.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},f.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},f.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},f.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},f.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);T(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},f.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);T(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},f.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},f.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},f.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},f.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},f.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},f.prototype.writeFloatLE=function(t,e,n){return C(this,t,e,!0,n)},f.prototype.writeFloatBE=function(t,e,n){return C(this,t,e,!1,n)},f.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},f.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},f.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e<t.length||(e=t.length),e||(e=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||this.length<=n)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");this.length<r&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;0<=i;--i)t[i+e]=this[i+n];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},f.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=f.isBuffer(t)?t:I(""+new f(t,r)),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var L=/[^+\/0-9A-Za-z-_]/g}(e(7))},function(t,e,n){"use strict";var r=n(25)();t.exports=function(t){return t!==r&&null!==t}},function(r,t,e){!function(t){var e;for(var n in e=void 0!==t&&t.console?t.console:"undefined"!=typeof window&&window.console?window.console:window.console={},r.exports=e,{log:1,info:1,error:1,warn:1,dir:1,trace:1,assert:1,time:1,timeEnd:1})e[n]||(e[n]=function(){})}(e(7))},function(t){"use strict";t.exports=function(t){return null!==t&&"object"==typeof t}},function(lp){var np;np=function(){return this}();try{np=np||Function("return this")()||eval("this")}catch(t){"object"==typeof window&&(np=window)}lp.exports=np},function(y,v,w){(function(e){function n(){}function r(t){if(!p(t))return t;var e=[];for(var n in t)i(e,n,t[n]);return e.join("&")}function i(e,n,t){if(null!=t)if(Array.isArray(t))t.forEach(function(t){i(e,n,t)});else if(p(t))for(var r in t)i(e,n+"["+r+"]",t[r]);else e.push(encodeURIComponent(n)+"="+encodeURIComponent(t));else null===t&&e.push(encodeURIComponent(n))}function t(t){for(var e,n,r={},i=t.split("&"),o=0,s=i.length;o<s;++o)-1==(n=(e=i[o]).indexOf("="))?r[decodeURIComponent(e)]="":r[decodeURIComponent(e.slice(0,n))]=decodeURIComponent(e.slice(n+1));return r}function a(t){return/[\/+]json($|[^-\w])/.test(t)}function o(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.header=this.headers=function(t){for(var e,n,r,i,o=t.split(/\r?\n/),s={},a=0,u=o.length;a<u;++a)-1!=(e=(n=o[a]).indexOf(":"))&&(r=n.slice(0,e).toLowerCase(),i=m(n.slice(e+1)),s[r]=i);return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body=null===this.text&&t._responseType?this.xhr.response:"HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function s(t,e){var r=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var e,n=null,t=null;try{t=new o(r)}catch(t){return(n=Error("Parser is unable to parse the response")).parse=!0,n.original=t,r.xhr?(n.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,n.status=r.xhr.status?r.xhr.status:null,n.statusCode=n.status):(n.rawResponse=null,n.status=null),r.callback(n)}r.emit("response",t);try{r._isResponseOK(t)||(e=Error(t.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=n,e.response=t,e.status=t.status,r.callback(e,t)):r.callback(null,t)})}function u(t,e,n){var r=g("DELETE",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}var c;c="undefined"!=typeof window?window:"undefined"!=typeof self?self:(e.warn("Using browser-only version of superagent in non-browser environment"),this);var h=w(14),f=w(13),p=w(6),l=w(12),d=w(10),g=v=y.exports=function(t,e){return"function"==typeof e?new v.Request("GET",t).end(e):1==arguments.length?new v.Request("GET",t):new v.Request(t,e)};v.Request=s,g.getXHR=function(){if(!(!c.XMLHttpRequest||c.location&&"file:"==c.location.protocol&&c.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};var m="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};g.serializeObject=r,g.parseString=t,g.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},g.serialize={"application/x-www-form-urlencoded":r,"application/json":JSON.stringify},g.parse={"application/x-www-form-urlencoded":t,"application/json":JSON.parse},l(o.prototype),o.prototype._parseBody=function(t){var e=g.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&a(this.type)&&(e=g.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null)},o.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r=Error("cannot "+e+" "+n+" ("+this.status+")");return r.status=this.status,r.method=e,r.url=n,r},g.Response=o,h(s.prototype),f(s.prototype),s.prototype.type=function(t){return this.set("Content-Type",g.types[t]||t),this},s.prototype.accept=function(t){return this.set("Accept",g.types[t]||t),this},s.prototype.auth=function(t,e,n){1===arguments.length&&(e=""),"object"==typeof e&&null!==e&&(n=e,e=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});return this._auth(t,e,n,function(t){if("function"==typeof btoa)return btoa(t);throw Error("Cannot use basic auth, btoa is not a function")})},s.prototype.query=function(t){return"string"!=typeof t&&(t=r(t)),t&&this._query.push(t),this},s.prototype.attach=function(t,e,n){if(e){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,n||e.name)}return this},s.prototype._getFormData=function(){return this._formData||(this._formData=new c.FormData),this._formData},s.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var n=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),n(t,e)},s.prototype.crossDomainError=function(){var t=Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},s.prototype.buffer=s.prototype.ca=s.prototype.agent=function(){return e.warn("This is not supported in browser version of superagent"),this},s.prototype.pipe=s.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},s.prototype._isHost=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},s.prototype.end=function(t){return this._endCalled&&e.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||n,this._finalizeQueryString(),this._end()},s.prototype._end=function(){var n=this,r=this.xhr=g.getXHR(),t=this._formData||this._data;this._setTimeouts(),r.onreadystatechange=function(){var t=r.readyState;if(2<=t&&n._responseTimeoutTimer&&clearTimeout(n._responseTimeoutTimer),4==t){var e;try{e=r.status}catch(t){e=0}if(!e){if(n.timedout||n._aborted)return;return n.crossDomainError()}n.emit("end")}};var e=function(t,e){0<e.total&&(e.percent=e.loaded/e.total*100),e.direction=t,n.emit("progress",e)};if(this.hasListeners("progress"))try{r.onprogress=e.bind(null,"download"),r.upload&&(r.upload.onprogress=e.bind(null,"upload"))}catch(t){}try{this.username&&this.password?r.open(this.method,this.url,!0,this.username,this.password):r.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(r.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof t&&!this._isHost(t)){var i=this._header["content-type"],o=this._serializer||g.serialize[i?i.split(";")[0]:""];!o&&a(i)&&(o=g.serialize["application/json"]),o&&(t=o(t))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&r.setRequestHeader(s,this.header[s]);return this._responseType&&(r.responseType=this._responseType),this.emit("request",this),r.send(void 0!==t?t:null),this},g.agent=function(){return new d},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(r){d.prototype[r.toLowerCase()]=function(t,e){var n=new g.Request(r,t);return this._setDefaults(n),e&&n.end(e),n}}),d.prototype.del=d.prototype.delete,g.get=function(t,e,n){var r=g("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},g.head=function(t,e,n){var r=g("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},g.options=function(t,e,n){var r=g("OPTIONS",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},g.del=u,g.delete=u,g.patch=function(t,e,n){var r=g("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},g.post=function(t,e,n){var r=g("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},g.put=function(t,e,n){var r=g("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}}).call(this,w(5))},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){this.supportsStorage()&&(this._storage=window.localStorage)}return t.prototype.supportsStorage=function(){try{return"sessionStorage"in window&&null!==window.sessionStorage}catch(t){return!1}},t.prototype.setStorage=function(t){this._storage=t},t.prototype.setItem=function(t,e){this.supportsStorage()&&this._storage.setItem(t,e)},t.prototype.removeItem=function(t){this.supportsStorage()&&this._storage.removeItem(t)},t.prototype.getItem=function(t){if(this.supportsStorage())return this._storage.getItem(t)},t}()},function(t){function e(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(t){e.prototype[t]=function(){return this._defaults.push({fn:t,arguments:arguments}),this}}),e.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},t.exports=e},function(t,e){"use strict";e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){return t.split(/ *; */).reduce(function(t,e){var n=e.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(t[r]=i),t},{})},e.parseLinks=function(t){return t.split(/ *, */).reduce(function(t,e){var n=e.split(/ *; */),r=n[0].slice(1,-1);return t[n[1].split(/ *= */)[1].slice(1,-1)]=r,t},{})},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},function(t,e,n){"use strict";function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}var i=n(11);(t.exports=r).prototype.get=function(t){return this.header[t.toLowerCase()]},r.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=i.type(e);var n=i.params(e);for(var r in n)this[r]=n[r];this.links={};try{t.link&&(this.links=i.parseLinks(t.link))}catch(t){}},r.prototype._setStatusProperties=function(t){var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.redirect=3==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.forbidden=403==t,this.notFound=404==t}},function(t,e,s){"use strict";!function(o){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}var i=s(6);(t.exports=n).prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},n.prototype.parse=function(t){return this._parser=t,this},n.prototype.responseType=function(t){return this._responseType=t,this},n.prototype.serialize=function(t){return this._serializer=t,this},n.prototype.timeout=function(t){if(!t||"object"!=typeof t)return this._timeout=t,this._responseTimeout=0,this;for(var e in t)switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;default:o.warn("Unknown timeout option",e)}return this},n.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),0<t||(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var r=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];n.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(t,e);if(!0===n)return!0;if(!1===n)return!1}catch(t){o.error(t)}if(e&&e.status&&500<=e.status&&501!=e.status)return!0;if(t){if(t.code&&~r.indexOf(t.code))return!0;if(t.timeout&&"ECONNABORTED"==t.code)return!0;if(t.crossDomain)return!0}return!1},n.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},n.prototype.then=function(t,e){if(!this._fullfilledPromise){var i=this;this._endCalled&&o.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(n,r){i.end(function(t,e){t?r(t):n(e)})})}return this._fullfilledPromise.then(t,e)},n.prototype.catch=function(t){return this.then(void 0,t)},n.prototype.use=function(t){return t(this),this},n.prototype.ok=function(t){if("function"!=typeof t)throw Error("Callback required");return this._okCallback=t,this},n.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):200<=t.status&&t.status<300)},n.prototype.getHeader=n.prototype.get=function(t){return this._header[t.toLowerCase()]},n.prototype.set=function(t,e){if(i(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},n.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},n.prototype.field=function(t,e){if(null==t)throw Error(".field(name, val) name can not be empty");if(this._data&&o.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),i(t)){for(var n in t)this.field(n,t[n]);return this}if(Array.isArray(e)){for(var r in e)this.field(t,e[r]);return this}if(null==e)throw Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=""+e),this._getFormData().append(t,e),this},n.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},n.prototype._auth=function(t,e,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(t+":"+e));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer "+t)}return this},n.prototype.withCredentials=function(t){return null==t&&(t=!0),this._withCredentials=t,this},n.prototype.redirects=function(t){return this._maxRedirects=t,this},n.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw TypeError("Invalid argument");return this._maxResponseSize=t,this},n.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},n.prototype.send=function(t){var e=i(t),n=this._header["content-type"];if(this._formData&&o.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(e&&i(this._data))for(var r in t)this._data[r]=t[r];else this._data="string"==typeof t?(n||this.type("form"),"application/x-www-form-urlencoded"==(n=this._header["content-type"])?this._data?this._data+"&"+t:t:(this._data||"")+t):t;return!e||this._isHost(t)||n||this.type("json"),this},n.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},n.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.indexOf("?")<0?"?":"&")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(0<=e){var n=this.url.substring(e+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,e)+"?"+n.join("&")}}},n.prototype._appendQueryString=function(){o.trace("Unsupported")},n.prototype._timeoutError=function(t,e,n){if(!this._aborted){var r=Error(t+e+"ms exceeded");r.timeout=e,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},n.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}}(s(5))},function(t){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}(t.exports=n).prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,h=-7,f=n?i-1:0,p=n?-1:1,l=t[e+f];for(f+=p,o=l&(1<<-h)-1,l>>=-h,h+=a;0<h;o=256*o+t[e+f],f+=p,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;0<h;s=256*s+t[e+f],f+=p,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,r),o-=c}return(l?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,f=h>>1,p=23===i?5.960464477539062e-8:0,l=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(a=isNaN(e)?1:0,s=h):(e*(u=Math.pow(2,-(s=Math.floor(Math.log(e)/Math.LN2))))<1&&(s--,u*=2),(e+=s+f<1?p*Math.pow(2,1-f):p/u)*u<2||(s++,u/=2),s+f<h?s+f<1?(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0):(a=(e*u-1)*Math.pow(2,i),s+=f):(a=0,s=h));8<=i;t[n+l]=255&a,l+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;0<c;t[n+l]=255&s,l+=d,s/=256,c-=8);t[n+l-d]|=128*g}},function(t,e){"use strict";function h(t){var e=t.length;if(0<e%4)throw Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function a(t,e,n){for(var r,i=[],o=e;o<n;o+=3)i.push(u[(r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]))>>18&63]+u[r>>12&63]+u[r>>6&63]+u[63&r]);return i.join("")}e.byteLength=function(t){var e=h(t),n=e[1];return 3*(e[0]+n)/4-n},e.toByteArray=function(t){for(var e,n,r=h(t),i=r[0],o=r[1],s=new p(3*(i+(n=o))/4-n),a=0,u=0<o?i-4:i,c=0;c<u;c+=4)e=f[t.charCodeAt(c)]<<18|f[t.charCodeAt(c+1)]<<12|f[t.charCodeAt(c+2)]<<6|f[t.charCodeAt(c+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;return 2===o&&(e=f[t.charCodeAt(c)]<<2|f[t.charCodeAt(c+1)]>>4,s[a++]=255&e),1===o&&(e=f[t.charCodeAt(c)]<<10|f[t.charCodeAt(c+1)]<<4|f[t.charCodeAt(c+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e),s},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=[],o=0,s=n-r;o<s;o+=16383)i.push(a(t,o,s<o+16383?s:o+16383));return 1===r?i.push(u[(e=t[n-1])>>2]+u[e<<4&63]+"=="):2===r&&i.push(u[(e=(t[n-2]<<8)+t[n-1])>>10]+u[e>>4&63]+u[e<<2&63]+"="),i.join("")};for(var u=[],f=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0;r<64;++r)u[r]=n[r],f[n.charCodeAt(r)]=r;f[45]=62,f[95]=63},function(t){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t){"use strict";var n=String.prototype.indexOf;t.exports=function(t,e){return-1<n.call(this,t,e)}},function(t){"use strict";var e="razdwatrzy";t.exports=function(){return"function"==typeof e.contains&&(!0===e.contains("dwa")&&!1===e.contains("foo"))}},function(t,e,n){"use strict";t.exports=n(20)()?String.prototype.contains:n(19)},function(t){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,n){"use strict";var r=n(4),i=Array.prototype.forEach,o=Object.create;t.exports=function(){var e=o(null);return i.call(arguments,function(t){r(t)&&function(t,e){var n;for(n in t)e[n]=t[n]}(Object(t),e)}),e}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},function(t){"use strict";t.exports=function(){}},function(t,e,n){"use strict";var r=n(4),i=Object.keys;t.exports=function(t){return i(r(t)?Object(t):t)}},function(t){"use strict";t.exports=function(){try{return!0}catch(t){return!1}}},function(t,e,n){"use strict";t.exports=n(27)()?Object.keys:n(26)},function(t,e,n){"use strict";var s=n(28),a=n(24),u=Math.max;t.exports=function(e,n){var r,t,i,o=u(arguments.length,2);for(e=Object(a(e)),i=function(t){try{e[t]=n[t]}catch(t){r||(r=t)}},t=1;t<o;++t)s(n=arguments[t]).forEach(i);if(void 0!==r)throw r;return e}},function(t){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,n){"use strict";t.exports=n(30)()?Object.assign:n(29)},function(t,e,n){"use strict";var u=n(31),c=n(23),h=n(22),f=n(21);(t.exports=function(t,e,n){var r,i,o,s,a;return arguments.length<2||"string"!=typeof t?(s=e,e=t,t=null):s=n,null==t?(r=o=!0,i=!1):(r=f.call(t,"c"),i=f.call(t,"e"),o=f.call(t,"w")),a={value:e,configurable:r,enumerable:i,writable:o},s?u(c(s),a):a}).gs=function(t,e,n,r){var i,o,s,a;return"string"!=typeof t?(s=n,n=e,e=t,t=null):s=r,null==e?e=void 0:h(e)?null==n?n=void 0:h(n)||(s=n,n=void 0):(s=e,e=n=void 0),o=null==t?!(i=!0):(i=f.call(t,"c"),f.call(t,"e")),a={get:e,set:n,configurable:i,enumerable:o},s?u(c(s),a):a}},function(t,i,o){"use strict";o.r(i),function(e){o.d(i,"SingleApiTest",function(){return t});var n=o(35),r=o(34),t=function(){var t=new n.a;t.setConfig({provider:"ECM",hostEcm:"http://localhost:3000",authType:"BASIC",contextRoot:""}),new r.a(t).getRepositoryInformation().then(function(t){e.log("ecmVers"+t)},function(t){e.log("error ecmvers"+t)})}}(o(5))},function(t,e,n){"use strict";var r=n(0),i=function(){function t(t){this.apiClient=t.ecmClient}return t.prototype.errorMessage=function(t,e){return"Missing param "+t+" in "+e},t}();n.d(e,"a",function(){return o});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.getRepositoryInformation=function(){return this.apiClient.callApi("/discovery","GET",{},{},{},{},null,[],["application/json"])},e}(i)},function(t,e,n){"use strict";var r=n(1),i=n(0),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.a(e,t),e.prototype.createTicket=function(t){var e=t;if(null==t)throw Error("Required param 'ticketBodyCreate' in createTicket");return this.apiClient.callApi("/tickets","POST",{},{},{},{},e,["application/json"],["application/json"])},e.prototype.deleteTicket=function(){return this.apiClient.callApi("/tickets/-me-","DELETE",{},{},{},{},null,["application/json"],["application/json"])},e.prototype.validateTicket=function(){return this.apiClient.callApi("/tickets/-me-","GET",{},{},{},{},null,["application/json"],["application/json"])},e}(function(){function t(t){this.apiClient=t.ecmClient}return t.prototype.errorMessage=function(t,e){return"Missing param "+t+" in "+e},t}()),o=n(2),c=r,s=function(n){function t(t){var e=n.call(this)||this;return e.config=t,e.basePath=e.config.hostEcm+"/"+e.config.contextRoot+"/api/-default-/public/authentication/versions/1",e.ticketStorageLabel=e.config.domainPrefix?e.config.domainPrefix.concat("-ticket-ECM"):"ticket-ECM",e.config.ticketEcm?e.setTicket(t.ticketEcm):e.storage.getItem(e.ticketStorageLabel)&&e.setTicket(e.storage.getItem(e.ticketStorageLabel)),c.call(e),e}return i.a(t,n),t.prototype.changeHost=function(){this.basePath=this.config.hostEcm+"/"+this.config.contextRoot+"/api/-default-/public/authentication/versions/1",this.ticket=void 0},t.prototype.saveUsername=function(t){this.storage.supportsStorage()&&this.storage.setItem("ACS_USERNAME",t)},t.prototype.login=function(r,t){var i=this;this.authentications.basicAuth.username=r,this.authentications.basicAuth.password=t;var o,s=new u(this);o.userId=this.authentications.basicAuth.username,o.password=this.authentications.basicAuth.password;var a=new Promise(function(e,n){s.createTicket(o).then(function(t){i.saveUsername(r),i.setTicket(t.entry.id),a.emit("success"),e(t.entry.id)}).catch(function(t){i.saveUsername(""),a.emit(401===t.status?"unauthorized":403===t.status?"forbidden":"error"),n(t)})});return c(a),a},t.prototype.validateTicket=function(){var r=this,t=new u(this);this.setTicket(this.config.ticketEcm);var i=new Promise(function(e,n){t.validateTicket().then(function(t){r.setTicket(t.entry.id),i.emit("success"),e(t.entry.id)},function(t){401===t.status&&i.emit("unauthorized"),i.emit("error"),n(t)})});return c(i),i},t.prototype.logout=function(){var n=this;this.saveUsername("");var r=new u(this),i=new Promise(function(t,e){r.deleteTicket().then(function(){i.emit("logout"),n.invalidateSession(),t("logout")},function(t){401===t.status&&i.emit("unauthorized"),i.emit("error"),e(t)})});return c(i),i},t.prototype.setTicket=function(t){this.authentications.basicAuth.username="ROLE_TICKET",this.authentications.basicAuth.password=t,this.storage.setItem(this.ticketStorageLabel,t),this.ticket=t},t.prototype.getTicket=function(){return this.ticket},t.prototype.invalidateSession=function(){this.storage.removeItem(this.ticketStorageLabel),this.authentications.basicAuth.username=null,this.authentications.basicAuth.password=null,this.ticket=null},t.prototype.isLoggedIn=function(){return!!this.ticket},t.prototype.getAuthentication=function(){return this.authentications},t}(o.a);c(s.prototype);var a=n(36),h=n(37),f=function(r){function t(t,e){var n=r.call(this)||this;return n.className="EcmClient",n.config=t,n.servicePath=e,n.changeHost(),n}return i.a(t,r),t.prototype.changeHost=function(){this.host=this.config.hostEcm,this.basePath=this.config.hostEcm+"/"+this.config.contextRoot+this.servicePath},t.prototype.setAuthentications=function(t){this.authentications=t},t}(o.a),p=function(n){function t(t){var e=n.call(this)||this;return e.className="BpmClient",e.config=t,e.changeHost(),e}return i.a(t,n),t.prototype.changeHost=function(){this.host=this.config.hostBpm,this.basePath=this.config.hostBpm+"/"+this.config.contextRootBpm},t.prototype.setAuthentications=function(t){this.authentications=t},t}(o.a),l=n(9);n.d(e,"a",function(){return g});var d=r,g=function(){function t(){this.on=d.on,this.off=d.off,this.once=d.once,this.emit=d.emit,this.on=(new d).on,this.off=(new d).off,this.once=(new d).once,this.emit=(new d).emit,d.call(this)}return t.prototype.setConfig=function(t){return t||(t={}),this.storage=new l.a,this.config={hostEcm:t.hostEcm||"http://127.0.0.1:8080",hostBpm:t.hostBpm||"http://127.0.0.1:9999",oauth2:t.oauth2,authType:t.authType||"BASIC",contextRoot:t.contextRoot||"alfresco",contextRootBpm:t.contextRootBpm||"activiti-app",provider:t.provider||"ECM",ticketEcm:t.ticketEcm,ticketBpm:t.ticketBpm,accessToken:t.accessToken,disableCsrf:t.disableCsrf||!1,domainPrefix:t.domainPrefix||"",withCredentials:t.withCredentials||!1},this.ecmPrivateClient=new f(this.config,"/api/-default-/private/alfresco/versions/1"),this.ecmClient=new f(this.config,"/api/-default-/public/alfresco/versions/1"),this.searchClient=new f(this.config,"/api/-default-/public/search/versions/1"),this.discoveryClient=new f(this.config,"/api"),this.gsClient=new f(this.config,"/api/-default-/public/gs/versions/1"),this.bpmClient=new p(this.config),this.errorListeners(),this.isOauthConfiguration()?(this.oauth2Auth=new h.a(this.config),this.setAuthenticationClientECMBPM(this.oauth2Auth.getAuthentication(),this.oauth2Auth.getAuthentication())):(this.bpmAuth=new a.a(this.config),this.ecmAuth=new s(this.config),this.setAuthenticationClientECMBPM(this.ecmAuth.getAuthentication(),this.bpmAuth.getAuthentication())),t},t.prototype.errorListeners=function(){var e=this;this.ecmClient.on("error",function(t){e.errorHandler(t)}),this.ecmPrivateClient.on("error",function(t){e.errorHandler(t)}),this.bpmClient.on("error",function(t){e.errorHandler(t)}),this.searchClient.on("error",function(t){e.errorHandler(t)}),this.discoveryClient.on("error",function(t){e.errorHandler(t)}),this.gsClient.on("error",function(t){e.errorHandler(t)})},t.prototype.errorHandler=function(t){401===t.status&&this.invalidateSession(),this.emit("error",t)},t.prototype.changeWithCredentialsConfig=function(t){this.config.withCredentials=t},t.prototype.changeCsrfConfig=function(t){this.config.disableCsrf=t,this.bpmAuth.changeCsrfConfig(t)},t.prototype.changeEcmHost=function(t){this.config.hostEcm=t,this.ecmAuth.changeHost(),this.ecmClient.changeHost()},t.prototype.changeBpmHost=function(t){this.config.hostBpm=t,this.bpmAuth.changeHost(),this.bpmClient.changeHost()},t.prototype.login=function(t,e){var n=this;if(t&&(t=t.trim()),this.isOauthConfiguration()){var r=void 0;return(r=this.oauth2Auth.login(t,e)).then(function(t){n.config.accessToken=t},function(){}),r}if(this.isBpmConfiguration()){var i=this.bpmAuth.login(t,e);return i.then(function(t){n.config.ticketBpm=t}),i}if(this.isEcmConfiguration()){var o=this.ecmAuth.login(t,e);return o.then(function(t){n.setAuthenticationClientECMBPM(n.ecmAuth.getAuthentication(),null),n.config.ticketEcm=t}),o}if(this.isEcmBpmConfiguration()){var s=this._loginBPMECM(t,e);return s.then(function(t){n.config.ticketEcm=t[0],n.config.ticketBpm=t[1]}),s}},t.prototype.implicitLogin=function(){var t=this;return this.isOauthConfiguration()?new Promise(function(){t.oauth2Auth.implicitLogin()}):Promise.reject("Missing the required oauth2 configuration")},t.prototype.setAuthenticationClientECMBPM=function(t,e){this.ecmClient.setAuthentications(t),this.searchClient.setAuthentications(t),this.ecmPrivateClient.setAuthentications(t),this.bpmClient.setAuthentications(e),this.searchClient.setAuthentications(t),this.discoveryClient.setAuthentications(t),this.gsClient.setAuthentications(t)},t.prototype.loginTicket=function(t,e){return this.config.ticketEcm=t,this.config.ticketBpm=e,this.ecmAuth.validateTicket()},t.prototype._loginBPMECM=function(t,e){var r=this.ecmAuth.login(t,e),i=this.bpmAuth.login(t,e),o=new Promise(function(e,n){Promise.all([r,i]).then(function(t){o.emit("success"),e(t)},function(t){401===t.status&&o.emit("unauthorized"),o.emit("error"),n(t)})});return d(o),o},t.prototype.logout=function(){var t=this;if(this.isOauthConfiguration())return this.oauth2Auth.logOut();if(this.isBpmConfiguration())return this.bpmAuth.logout();if(this.isEcmConfiguration()){var e=this.ecmAuth.logout();return e.then(function(){t.config.ticket=void 0},function(){}),e}return this.isEcmBpmConfiguration()?this._logoutBPMECM():void 0},t.prototype._logoutBPMECM=function(){var n=this,r=this.ecmAuth.logout(),i=this.bpmAuth.logout(),o=new Promise(function(t,e){Promise.all([r,i]).then(function(){n.config.ticket=void 0,o.emit("logout"),t("logout")},function(t){401===t.status&&o.emit("unauthorized"),o.emit("error"),e(t)})});return d(o),o},t.prototype.isLoggedIn=function(){return this.isOauthConfiguration()?this.oauth2Auth.isLoggedIn():this.isBpmConfiguration()?this.bpmAuth.isLoggedIn():this.isEcmConfiguration()?this.ecmAuth.isLoggedIn():this.isEcmBpmConfiguration()?this.ecmAuth.isLoggedIn()&&this.bpmAuth.isLoggedIn():void 0},t.prototype.isBpmLoggedIn=function(){return!(!this.isBpmConfiguration()&&!this.isEcmBpmConfiguration())&&(this.isOauthConfiguration()?this.oauth2Auth.isLoggedIn():this.bpmAuth.isLoggedIn())},t.prototype.isEcmLoggedIn=function(){return!(!this.isEcmConfiguration()&&!this.isEcmBpmConfiguration())&&(this.isOauthConfiguration()?this.oauth2Auth.isLoggedIn():this.ecmAuth.isLoggedIn())},t.prototype.getBpmUsername=function(){return this.isOauthConfiguration()?this.oauth2Auth.storage.getItem("USERNAME"):this.bpmAuth.storage.getItem("APS_USERNAME")},t.prototype.getEcmUsername=function(){return this.isOauthConfiguration()?this.oauth2Auth.storage.getItem("USERNAME"):this.ecmAuth.storage.getItem("ACS_USERNAME")},t.prototype.refreshToken=function(){return this.isOauthConfiguration()?this.config.oauth2.implicitFlow?Promise.reject("Manual refresh token not possible in implicit flow"):this.oauth2Auth.refreshToken():Promise.reject("Missing the required oauth2 configuration")},t.prototype.getTicketAuth=function(){return this.oauth2Auth&&this.oauth2Auth.getToken()},t.prototype.setTicket=function(t,e){this.ecmAuth&&this.ecmAuth.setTicket(t),this.bpmAuth&&this.bpmAuth.setTicket(e)},t.prototype.invalidateSession=function(){this.oauth2Auth?this.oauth2Auth.invalidateSession():(this.ecmAuth.invalidateSession(),this.bpmAuth.invalidateSession())},t.prototype.getTicketBpm=function(){return this.bpmAuth&&this.bpmAuth.getTicket()},t.prototype.getTicketEcm=function(){return this.ecmAuth&&this.ecmAuth.getTicket()},t.prototype.getTicket=function(){return[this.ecmAuth.getTicket(),this.bpmAuth.getTicket()]},t.prototype.isBpmConfiguration=function(){return this.config.provider&&"BPM"===this.config.provider.toUpperCase()},t.prototype.isEcmConfiguration=function(){return this.config.provider&&"ECM"===this.config.provider.toUpperCase()},t.prototype.isOauthConfiguration=function(){return"OAUTH"===this.config.authType},t.prototype.isEcmBpmConfiguration=function(){return this.config.provider&&"ALL"===this.config.provider.toUpperCase()},t}()},function(t,i,o){"use strict";!function(l){o.d(i,"a",function(){return r});var e=o(0),t=o(1),n=o(2),d=t,r=function(n){function t(t){var e=n.call(this)||this;return e.className="BpmAuth",e.config=t,e.ticket=void 0,e.basePath=t.hostBpm+"/"+e.config.contextRootBpm,e.authentications={basicAuth:{type:"activiti",ticket:""}},e.config.ticketBpm?e.setTicket(t.ticketBpm):e.storage.getItem("ticket-BPM")&&e.setTicket(e.storage.getItem("ticket-BPM")),d.call(e),e}return e.a(t,n),t.prototype.changeHost=function(){this.basePath=this.config.hostBpm+"/"+this.config.contextRootBpm,this.ticket=void 0},t.prototype.changeCsrfConfig=function(t){this.config.disableCsrf=t},t.prototype.saveUsername=function(t){this.storage.supportsStorage()&&this.storage.setItem("APS_USERNAME",t)},t.prototype.login=function(r,t){var i=this;this.authentications.basicAuth.username=r,this.authentications.basicAuth.password=t;var o={},s={},a={},u={"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},c={j_username:this.authentications.basicAuth.username,j_password:this.authentications.basicAuth.password,_spring_security_remember_me:!0,submit:"Login"},h=["application/x-www-form-urlencoded"],f=["application/json"],p=new Promise(function(e,n){i.callApi("/app/authentication","POST",s,a,u,c,o,h,f).then(function(){i.saveUsername(r);var t="Basic "+new l(i.authentications.basicAuth.username+":"+i.authentications.basicAuth.password).toString("base64");i.setTicket(t),p.emit("success"),e(t)},function(t){i.saveUsername(""),p.emit(401===t.status?"unauthorized":403===t.status?"forbidden":"error"),n(t)})});return d(p),p},t.prototype.logout=function(){var n=this;this.saveUsername("");var r={},i={},o={},s={},a={},u=["application/json"],c=["application/json"],h=new Promise(function(t,e){n.callApi("/app/logout","GET",i,o,s,a,r,u,c).then(function(){h.emit("logout"),n.invalidateSession(),t("logout")},function(t){401===t.status&&h.emit("unauthorized"),h.emit("error"),e(t)})});return d(h),h},t.prototype.setTicket=function(t){this.authentications.basicAuth.ticket=t,this.authentications.basicAuth.password=null,this.storage.setItem("ticket-BPM",t),this.ticket=t},t.prototype.invalidateSession=function(){this.storage.removeItem("ticket-BPM"),this.authentications.basicAuth.ticket=null,this.authentications.basicAuth.password=null,this.ticket=null},t.prototype.getTicket=function(){return this.ticket},t.prototype.isLoggedIn=function(){return!!this.ticket},t.prototype.getAuthentication=function(){return this.authentications},t}(n.a);d(r.prototype)}(o(3).Buffer)},function(t,i,o){"use strict";!function(h){o.d(i,"a",function(){return r});var e=o(0),t=o(1),n=o(2),f=t,r=function(r){function t(t){var e=r.call(this)||this;if(e.config=t,e.init=!1,e.config.oauth2){if(null==e.config.oauth2.host)throw"Missing the required oauth2 host parameter";if(null==e.config.oauth2.clientId)throw"Missing the required oauth2 clientId parameter";if(null==e.config.oauth2.scope)throw"Missing the required oauth2 scope parameter";if(null==e.config.oauth2.secret&&(e.config.oauth2.secret=""),null==e.config.oauth2.redirectUri&&e.config.oauth2.implicitFlow)throw"Missing redirectUri required parameter";if(e.config.oauth2.refreshTokenTimeout||(e.config.oauth2.refreshTokenTimeout=4e4),!e.config.oauth2.redirectSilentIframeUri){var n="";"undefined"!=typeof window&&(n=window.location.origin),e.config.oauth2.redirectSilentIframeUri=n+"/assets/silent-refresh.html"}e.basePath=e.config.oauth2.host,e.authentications={basicAuth:{type:"oauth2",accessToken:""}},e.host=e.config.oauth2.host,e.initOauth()}return f.call(e),e}return e.a(t,r),t.prototype.initOauth=function(){var t=this;if(!this.config.oauth2.implicitFlow&&this.isValidAccessToken()){var e=this.storage.getItem("access_token");this.setToken(e,null)}return Promise.resolve().then(function(){return t.discoveryUrls()}).then(function(){if(t.config.oauth2.implicitFlow)return t.loadJwks()}).then(function(){if(t.config.oauth2.implicitFlow)return t.checkFragment()})},t.prototype.discoveryUrls=function(){var r=this;return new Promise(function(e,n){var t=r.storage.getItem("discovery");if(t&&(r.discovery=JSON.parse(t)),r.discovery)r.emit("discovery",r.discovery),e(r.discovery);else{r.callApi(".well-known/openid-configuration","GET",{},{},{},{},{},["application/json"],["application/json"],{}).then(function(t){r.discovery={},r.discovery.loginUrl=t.authorization_endpoint,r.discovery.logoutUrl=t.end_session_endpoint,r.discovery.grantTypesSupported=t.grant_types_supported,r.discovery.issuer=t.issuer,r.discovery.tokenEndpoint=t.token_endpoint,r.discovery.userinfoEndpoint=t.userinfo_endpoint,r.discovery.jwksUri=t.jwks_uri,r.discovery.sessionCheckIFrameUrl=t.check_session_iframe,r.emit("discovery",r.discovery),r.storage.setItem("discovery",JSON.stringify(r.discovery)),e(t)},function(t){n(t.error)})}})},t.prototype.loadJwks=function(){var r=this;return new Promise(function(e,n){var t=r.storage.getItem("jwks");if(t&&(r.jwks=JSON.parse(t)),r.discovery.jwksUri)if(r.jwks)r.emit("jwks",r.jwks),e(r.jwks);else{r.callCustomApi(r.discovery.jwksUri,"GET",{},{},{},{},{},["application/json"],["application/json"],{}).then(function(t){r.jwks=t,r.emit("jwks",t),r.storage.setItem("jwks",JSON.stringify(t)),e(t)},function(t){n(t.error)})}else n("jwks error")})},t.prototype.checkFragment=function(s){var a=this;return new Promise(function(e,n){if(a.hashFragmentParams=a.getHashFragmentParams(s),void 0===s&&a.isValidAccessToken()){var t=a.storage.getItem("access_token");a.setToken(t,null),a.silentRefresh(),e(t)}if(a.hashFragmentParams){var r=a.hashFragmentParams.access_token,i=a.hashFragmentParams.id_token,o=a.hashFragmentParams.expires_in;a.hashFragmentParams.session_state||n("session state not present"),a.processJWTToken(i).then(function(t){t&&(a.storeIdToken(i,t.payload.exp),a.storeAccessToken(r,o),a.authentications.basicAuth.username=t.payload.preferred_username,a.saveUsername(t.payload.preferred_username),a.silentRefresh(),e(r))},function(t){n("Validation JWT error"+t)})}else a.config.oauth2.silentLogin&&a.implicitLogin()})},t.prototype.padBase64=function(t){for(;t.length%4!=0;)t+="=";return t},t.prototype.processJWTToken=function(h){var f=this;return new Promise(function(t,e){if(h){var n=h.split("."),r=f.padBase64(n[0]),i=f.b64DecodeUnicode(r),o=JSON.parse(i),s=f.padBase64(n[1]),a=f.b64DecodeUnicode(s),u=JSON.parse(a),c=f.storage.getItem("nonce");u.sub||e("Missing sub in JWT"),u.nonce!==c&&e("Failing nonce JWT is not corrisponding"+u.nonce),f.jwks&&t({idToken:h,payload:u,header:o})}})},t.prototype.b64DecodeUnicode=function(t){var e=t.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(e).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))},t.prototype.storeIdToken=function(t,e){this.storage.setItem("id_token",t),this.storage.setItem("id_token_expires_at",""+1e3*e),this.storage.setItem("id_token_stored_at",""+Date.now())},t.prototype.storeAccessToken=function(t,e){this.storage.setItem("access_token",t);var n=1e3*e,r=(new Date).getTime()+n;this.storage.setItem("access_token_expires_in",r),this.storage.setItem("access_token_stored_at",""+Date.now()),this.setToken(t,null)},t.prototype.saveUsername=function(t){this.storage.supportsStorage()&&this.storage.setItem("USERNAME",t)},t.prototype.implicitLogin=function(){var t=this;if(this.isValidToken()&&this.isValidAccessToken()){var e=this.storage.getItem("access_token");this.setToken(e,null)}else this.discovery&&this.discovery.loginUrl?this.redirectLogin():this.on("discovery",function(){t.redirectLogin()})},t.prototype.isValidToken=function(){var t=!1;if(this.getIdToken()){var e=this.storage.getItem("id_token_expires_at"),n=new Date;e&&parseInt(e,10)>=n.getTime()&&(t=!0)}return t},t.prototype.isValidAccessToken=function(){var t=!1;if(this.getAccessToken()){var e=this.storage.getItem("access_token_expires_in"),n=new Date;e&&parseInt(e,10)>=n.getTime()&&(t=!0)}return t},t.prototype.getIdToken=function(){return this.storage.getItem("id_token")},t.prototype.getAccessToken=function(){return this.storage.getItem("access_token")},t.prototype.redirectLogin=function(){if(this.config.oauth2.implicitFlow&&"undefined"!=typeof window){var t=this.composeImplicitLoginUrl();window.location.href=t,this.emit("implicit_redirect",t)}},t.prototype.genNonce=function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<40;n++)t+=e.charAt(Math.floor(62*Math.random()));return t},t.prototype.composeImplicitLoginUrl=function(){var t=this.genNonce();this.storage.setItem("nonce",t);var e=-1<this.discovery.loginUrl.indexOf("?")?"&":"?";return this.discovery.loginUrl+e+"client_id="+encodeURIComponent(this.config.oauth2.clientId)+"&redirect_uri="+encodeURIComponent(this.config.oauth2.redirectUri)+"&scope="+encodeURIComponent(this.config.oauth2.scope)+"&response_type="+encodeURIComponent("id_token token")+"&nonce="+encodeURIComponent(t)},t.prototype.composeIframeLoginUrl=function(){var t=this.genNonce();this.storage.setItem("nonce",t);var e=-1<this.discovery.loginUrl.indexOf("?")?"&":"?";return this.discovery.loginUrl+e+"client_id="+encodeURIComponent(this.config.oauth2.clientId)+"&redirect_uri="+encodeURIComponent(this.config.oauth2.redirectSilentIframeUri)+"&scope="+encodeURIComponent(this.config.oauth2.scope)+"&response_type="+encodeURIComponent("id_token token")+"&nonce="+encodeURIComponent(t)+"&prompt=none"},t.prototype.hasHashCharacter=function(t){return 0==t.indexOf("#")},t.prototype.startWithHashRoute=function(t){return t.startsWith("#/")},t.prototype.getHashFragmentParams=function(t){var e=null;if("undefined"!=typeof window){var n=void 0;if(t?(n=decodeURIComponent(t),this.removeHashFromSilentIframe(),this.destroyIframe()):(n=decodeURIComponent(window.location.hash),this.startWithHashRoute(n)||(window.location.hash="")),this.hasHashCharacter(n)&&!this.startWithHashRoute(n)){var r=n.indexOf("?");n=n.substr(-1<r?r+1:1),e=this.parseQueryString(n)}}return e},t.prototype.parseQueryString=function(t){var e,n,r,i,o,s,a,u={};if(null!==t){e=t.split("&");for(var c=0;c<e.length;c++)o=-1===(r=(n=e[c]).indexOf("="))?(i=n,null):(i=n.substr(0,r),n.substr(r+1)),s=decodeURIComponent(i),a=decodeURIComponent(o),"/"===s.substr(0,1)&&(s=s.substr(1)),u[s]=a}return u},t.prototype.silentRefresh=function(){var t=this;if("undefined"==typeof document)throw Error("Silent refresh supported only on browsers");setTimeout(function(){t.destroyIframe(),t.createIframe()},this.config.oauth2.refreshTokenTimeout)},t.prototype.removeHashFromSilentIframe=function(){var t=document.getElementById("silent_refresh_token_iframe");t&&t.contentWindow.location.hash&&(t.contentWindow.location.hash="")},t.prototype.createIframe=function(){var e=this,t=document.createElement("iframe");t.id="silent_refresh_token_iframe";var n=this.composeIframeLoginUrl();t.setAttribute("src",n),t.style.display="none",document.body.appendChild(t),this.iFameHashListner=function(){var t=document.getElementById("silent_refresh_token_iframe");e.checkFragment(t.contentWindow.location.hash)},t.addEventListener("load",this.iFameHashListner)},t.prototype.destroyIframe=function(){var t=document.getElementById("silent_refresh_token_iframe");t&&(t.removeEventListener("load",this.iFameHashListner),document.body.removeChild(t))},t.prototype.login=function(n,r){var i=this;return new Promise(function(t,e){i.discovery?i.grantPasswordLogin(n,r,t,e):i.on("discovery",function(){i.grantPasswordLogin(n,r,t,e)})})},t.prototype.grantPasswordLogin=function(e,t,n,r){var i=this,o="Basic "+new h(this.config.oauth2.clientId+":"+this.config.oauth2.secret).toString("base64"),s=this.callCustomApi(this.discovery.tokenEndpoint,"POST",{},{},{"Content-Type":"application/x-www-form-urlencoded",Authorization:o},{username:e,password:t,grant_type:"password",client_id:this.config.oauth2.clientId},{},["application/x-www-form-urlencoded"],["application/json"],{}).then(function(t){i.saveUsername(e),i.setToken(t.access_token,t.refresh_token),i.storeAccessToken(t.access_token,t.expires_in),n(t)},function(t){401===t.error.status&&i.emit("unauthorized"),i.emit("error"),r(t.error)});f(s)},t.prototype.refreshToken=function(){var t,r=this,i={},o={},s={},a={"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache",Authorization:"Basic "+new h(this.config.oauth2.clientId+":"+this.config.oauth2.secret).toString("base64")};t={refresh_token:this.authentications.basicAuth.refreshToken,grant_type:"refresh_token"};var u=["application/x-www-form-urlencoded"],c=["application/json"],e=new Promise(function(e,n){r.callCustomApi(r.discovery.tokenEndpoint,"POST",o,t,a,s,i,u,c,{}).then(function(t){r.setToken(t.access_token,t.refresh_token),e(t)},function(t){401===t.error.status&&r.emit("unauthorized"),r.emit("error"),n(t.error)})});return f(e),e},t.prototype.setToken=function(t,e){this.authentications.basicAuth.accessToken=t,this.authentications.basicAuth.refreshToken=e,this.authentications.basicAuth.password=null,this.token=t,this.emit("token_issued")},t.prototype.getToken=function(){return this.token},t.prototype.getAuthentication=function(){return this.authentications},t.prototype.changeHost=function(t){this.config.hostOauth2=t},t.prototype.isLoggedIn=function(){return!!this.authentications.basicAuth.accessToken},t.prototype.logOut=function(){var t=this,e=this.getIdToken();this.invalidateSession(),this.setToken(null,null);var n=-1<this.discovery.logoutUrl.indexOf("?")?"&":"?",r=this.discovery.logoutUrl+n+"post_logout_redirect_uri="+encodeURIComponent(this.config.oauth2.redirectUriLogout||this.config.oauth2.redirectUri)+"&id_token_hint="+encodeURIComponent(e);return Promise.resolve().then(function(){t.config.oauth2.implicitFlow&&"undefined"!=typeof window&&(window.location.href=r)})},t.prototype.invalidateSession=function(){this.storage.removeItem("access_token"),this.storage.removeItem("access_token_expires_in"),this.storage.removeItem("access_token_stored_at"),this.storage.removeItem("id_token"),this.storage.removeItem("id_token"),this.storage.removeItem("id_token_claims_obj"),this.storage.removeItem("id_token_expires_at"),this.storage.removeItem("id_token_stored_at"),this.storage.removeItem("nonce"),this.storage.removeItem("jwks"),this.storage.removeItem("discovery")},t}(n.a)}(o(3).Buffer)}]);